<script>
window.onload = function() {
  // æŸ¥æ‰¾æ‰€æœ‰ div.table-container å…ƒç´ 
  const tableContainers = document.querySelectorAll(".table-container");
  // éå†æ‰€æœ‰ div.table-container å…ƒç´ 
  tableContainers.forEach(function(tableContainer) {
    // å°† div.table-container çš„ç±»åè®¾ç½®ä¸º "code-hidden"
    tableContainer.classList.add("code-hidden");

    // è·å– div.table-container å†…çš„ span å…ƒç´ æ•°é‡
    const spanCount = tableContainer.querySelectorAll("tbody > tr > td.code > pre > span").length;

    // æ£€æŸ¥ span å…ƒç´ æ•°é‡æ˜¯å¦ >= 1
    if (spanCount >= 5) {
      // åˆ›å»ºä¸€ä¸ª <span> æ ‡ç­¾å¹¶æ·»åŠ åŠŸèƒ½
      const spanElement = document.createElement("span");
      spanElement.innerHTML = "The code is below ğŸ‘‡"; // è¡¨ç¤ºæŠ˜å ä»£ç 

      // æ’å…¥ä¸€ç‚¹ç©ºæ ¼
      const spaceElement = document.createTextNode(" ");
      spanElement.insertBefore(spaceElement, spanElement.firstChild);

      // å°† span æ’å…¥åˆ° DOM ä¸­
      tableContainer.parentNode.insertBefore(spanElement, tableContainer);

      // ä¸º span æ ‡ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
      spanElement.addEventListener("click", function() {
        // åˆ‡æ¢ tableContainer çš„ "code-hidden" ç±»
        tableContainer.classList.toggle("code-hidden");

        // åˆ‡æ¢ span æ ‡ç­¾çš„å†…å®¹
        spanElement.innerHTML = tableContainer.classList.contains("code-hidden") ? "The code is below ğŸ‘‡" : "Hide the code â˜";
      });
    }
  });
};
</script>

